{% extends 'microapp/base.html' %}

{% block title %}Film Index Generation - Microfilm Processing{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="/static/microapp/css/register/register.css">
    <link rel="stylesheet" href="/static/microapp/css/register/progress.css">
    <link rel="stylesheet" href="/static/microapp/css/register/index/index.css">
    <link rel="stylesheet" href="/static/microapp/css/register/allocation/allocation.css">
{% endblock %}

{% block content %}
<div class="register-container">
    <!-- Progress Tracker -->
    {% include 'microapp/register/progress.html' %}

    <!-- Index Generation component -->
    {% include 'microapp/register/index/index.html' %}
</div>
{% endblock %}

{% block extra_js %}
    <!-- Core libraries -->
    <script src="/static/microapp/js/register/progress.js"></script>
    
    <!-- Index module dependencies (order matters) -->
    <script src="/static/microapp/js/register/index/index-api.js"></script>
    <script src="/static/microapp/js/register/index/index-core.js"></script>
    <script src="/static/microapp/js/register/index/index-ui.js"></script>
    <script src="/static/microapp/js/register/index/index-events.js"></script>
    
    <script>
        // Initialize progress tracker with active step
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof ProgressTracker !== 'undefined') {
                ProgressTracker.setActiveStep(4);
                ProgressTracker.setProgress(50);
            }
        });
    </script>
{% endblock %} 