{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Microfilm Processing System{% endblock %}</title>
    {% load static %}
    <!-- Favicon -->
    <link rel="icon" href="{% static 'microapp/img/app-logo.png' %}" type="image/png">
    <link rel="shortcut icon" href="{% static 'microapp/img/app-logo.png' %}" type="image/png">
    <link rel="apple-touch-icon" href="{% static 'microapp/img/app-logo.png' %}">
    <meta name="msapplication-TileImage" content="{% static 'microapp/img/app-logo.png' %}">
    <meta name="msapplication-TileColor" content="#1a73e8">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Load our main CSS file -->
    <link rel="stylesheet" href="{% static 'microapp/css/styles.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <!-- Left side - Brand with Logo as a single clickable element -->
        <a href="{% url 'home' %}" class="navbar-brand">
            <img id="logo" src="{% static 'microapp/img/logo-light.png' %}" alt="Micro Logo">
            <span>micro</span>
        </a>
        
        <!-- Middle - Navigation Links -->
        <div class="navbar-links">
            <a href="{% url 'register' %}" {% if request.path == '/register/' %}class="active"{% endif %}>Register</a>
            <a href="{% url 'film' %}" {% if request.path == '/film/' %}class="active"{% endif %}>Film</a>
            <a href="{% url 'control' %}" {% if request.path == '/control/' %}class="active"{% endif %}>Control</a>
            <a href="{% url 'handoff' %}" {% if request.path == '/handoff/' %}class="active"{% endif %}>Handoff</a>
            <a href="{% url 'explore' %}" {% if request.path == '/explore/' %}class="active"{% endif %}>Explore</a>
            <a href="{% url 'report' %}" {% if request.path == '/report/' %}class="active"{% endif %}>Report</a>
        </div>
        
        <!-- Right side - Icons -->
        <div class="navbar-icons">
            <!-- Language Toggle -->
            <a id="lang-toggle"
                href="{% url 'toggle_language' %}?next={{ request.get_full_path }}"
                title="{% trans 'Toggle language' %}">
                <img
                src="https://flagcdn.com/20x15/{% if LANGUAGE_CODE == 'en' %}us{% elif LANGUAGE_CODE == 'de' %}de{% else %}{{ LANGUAGE_CODE }}{% endif %}.png"
                srcset="https://flagcdn.com/40x30/{% if LANGUAGE_CODE == 'en' %}us{% elif LANGUAGE_CODE == 'de' %}de{% else %}{{ LANGUAGE_CODE }}{% endif %}.png 2x, https://flagcdn.com/60x45/{% if LANGUAGE_CODE == 'en' %}us{% elif LANGUAGE_CODE == 'de' %}de{% else %}{{ LANGUAGE_CODE }}{% endif %}.png 3x"
                width="20"
                height="15"
                alt="{{ LANGUAGE_CODE|upper }}">
            </a>
            <!-- Dark Mode Toggle -->
            <button id="dark-mode-toggle" title="Toggle Dark Mode">
                <i id="dark-mode-icon" class="fas fa-moon"></i>
            </button>
            <!-- Settings Button -->
            <a href="{% url 'settings' %}" title="Settings">
                <i class="fas fa-cog"></i>
            </a>
            <!-- Login Button -->
            <a href="{% url 'login' %}" title="Login">
                <i class="fas fa-user"></i>
            </a>
        </div>
    </nav>

    <!-- Content area -->
    <div class="content">
        {% block content %}{% endblock %}
    </div>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- Main JavaScript file -->
    <script src="{% static 'microapp/js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html> 