{% extends 'microapp/base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "Documentation" %} Â· Micro{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'microapp/css/docs.css' %}">
{% endblock %}

{% block content %}
<div class="docs-layout">
  <!-- Sidebar -->
  <aside class="card docs-sidebar">
    <!-- Documentation Section -->
    <div class="docs-section">
      <h3>
        <i class="fas fa-book"></i>
        {% trans "Documentation" %}
      </h3>
      <p class="subtitle">{% trans "Browse documentation files" %}</p>
      
      {% if files %}
        <ul class="docs-file-list">
          {% for f in files %}
            <li class="docs-file-item">
              <a href="{% url 'docs' %}?file={{ f }}" 
                 class="docs-file-link {% if selected == f %}active{% endif %}">
                <i class="fas fa-file-alt docs-file-icon"></i>
                <span class="docs-file-name">{{ f }}</span>
              </a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="docs-empty-state" style="padding: 24px 12px;">
          <i class="fas fa-file-alt"></i>
          <p style="margin: 8px 0 0 0; font-size: 0.85rem;">{% trans "No documentation files found" %}</p>
        </div>
      {% endif %}
    </div>

    <hr class="docs-section-divider" />

    <!-- Explorer Section -->
    <div class="docs-section">
      <h3>
        <i class="fas fa-hdd"></i>
        {% trans "Drive Explorer" %}
      </h3>
      <p class="subtitle">{% trans "Browse X:\\ folders" %}</p>
      
      {% if drive_folders %}
        <ul class="docs-folder-list">
          {% for folder in drive_folders %}
            <li class="docs-folder-item">
              <a href="{% url 'docs' %}?folder={{ folder }}" 
                 class="docs-folder-link {% if selected_folder == folder %}active{% endif %}">
                <i class="fas fa-folder docs-folder-icon"></i>
                <span class="docs-folder-name">{{ folder }}</span>
              </a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="docs-empty-state" style="padding: 24px 12px;">
          <i class="fas fa-hdd"></i>
          <p style="margin: 8px 0 0 0; font-size: 0.85rem;">{% trans "No folders found on X:\\" %}</p>
        </div>
      {% endif %}
    </div>
  </aside>

  <!-- Content Area -->
  <section class="card docs-content">
    {% if folder_tree_html %}
      <!-- Explorer Tree View -->
      {{ folder_tree_html|safe }}
    {% elif content %}
      <!-- Documentation Content -->
      {{ content|safe }}
    {% else %}
      <!-- Empty State -->
      <div class="docs-empty-state">
        <i class="fas fa-folder-open"></i>
        <h3>{% trans "Welcome to Documentation" %}</h3>
        <p>{% trans "Select a document or folder from the sidebar to view its contents." %}</p>
      </div>
    {% endif %}
  </section>
</div>
{% endblock %}
